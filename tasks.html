<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Study Planner</title>
  <link rel="stylesheet" href="tasks.css">
</head>
<body id="container">
  <!-- TOP NAV -->
  <nav id="topnav">
    <div id="hamberger" onclick="openSidebar()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
        <path id="hamberger1" fill="white"
          d="M 5.5 9 A 1.5 1.5 0 1 0 5.5 12 L 42.5 12 A 1.5 1.5 0 1 0 42.5 9 L 5.5 9 z 
             M 5.5 22.5 A 1.5 1.5 0 1 0 5.5 25.5 L 42.5 25.5 A 1.5 1.5 0 1 0 42.5 22.5 L 5.5 22.5 z 
             M 5.5 36 A 1.5 1.5 0 1 0 5.5 39 L 42.5 39 A 1.5 1.5 0 1 0 42.5 36 L 5.5 36 z"/>
      </svg>
    </div>
    <div id="logo">
      <h2>STUDY PLANNER</h2>
    </div>
    <div id="menu">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="tasks.html">Tasks</a></li>
        <li><a href="reminders.html">Reminders</a></li>
        <li><a href="progress.html">Progress</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
    <div id="theme_toggle">
      <div id="slide_toggle" onclick="toggleTheme()">
        <img id="light_img" src="light_mode_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24.svg" alt="Light mode">
        <img id="dark_img" src="dark_mode_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24 (1).svg" alt="Dark mode">
      </div>
      <span id="light_span">Light Mode</span>
      <span id="dark_span">Dark Mode</span>
    </div>
    <div id="buttons">
      <a href="login.html">
        <button id="login_btn">Login</button>
      </a>
      <a href="signup.html">
        <button id="signup_btn">Signup</button>
      </a>
    </div>
  </nav>
  
  <!-- SIDEBAR -->
  <nav id="sidebar">
    <div id="sidenav_hamberger" onclick="closeSidebar()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
        <path fill="white"
          d="M 5.5 9 A 1.5 1.5 0 1 0 5.5 12 L 42.5 12 A 1.5 1.5 0 1 0 42.5 9 L 5.5 9 z 
             M 5.5 22.5 A 1.5 1.5 0 1 0 5.5 25.5 L 42.5 25.5 A 1.5 1.5 0 1 0 42.5 22.5 L 5.5 22.5 z 
             M 5.5 36 A 1.5 1.5 0 1 0 5.5 39 L 42.5 39 A 1.5 1.5 0 1 0 42.5 36 L 5.5 36 z"/>
      </svg>
      <h3>Study Planner</h3>
    </div>
    <div id="side_menu">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="tasks.html">Tasks</a></li>
        <li><a href="reminders.html">Reminders</a></li>
        <li><a href="progress.html">Progress</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
    <div id="side_buttons">
      <a href="login.html">
        <button id="side_login_btn">Login</button>
      </a>
      <a href="signup.html">
        <button id="side_signup_btn">Signup</button>
      </a>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main id="content">
    <div id="task_desc">
        <h1>Here You can add tasks !!</h1>
        <span id="task_span">
            Login/Signup to continue
        </span>
    </div>
    <div id="task_action">
        <div id="task_text" onclick="toggleTaskForm()">
            <h3>Add the Tasks here</h3>
            <img src="stat_minus_1_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24.svg" alt="downarrow">
        </div>
        <form id="task_form" onsubmit="addTask(event)">
          <div class="input">
            <label for="taskName">Task Name:</label>
            <input type="text" name="taskName" id="taskName" placeholder="Enter Task Name" required>
          </div>
          <div class="input">
            <label for="subject">Subject:</label>
            <input type="text" name="subject" id="subject" placeholder="Enter Subject Here" required>
          </div>
          <div class="input">
            <label for="priority">Priority:</label>
            <select name="priority" id="priority" required>
                <option value="High">High</option>
                <option value="Moderate" selected>Moderate</option>
                <option value="Low">Low</option>
            </select>
          </div>
          <div class="input">
            <label for="percentage">Completion %:</label>
            <input type="number" name="percentage" id="percentage" max="100" min="0" placeholder="eg:20" required>
          </div>
          <button type="submit" id="task_button">Add Task</button>
        </form>
    </div>
    
    <div id="task_list">
      <!-- Tasks will be added here dynamically -->
    </div>
  </main>

  <script>
    // Theme toggle functionality
    function toggleTheme() {
      const body = document.body;
      const lightImg = document.getElementById("light_img");
      const darkImg = document.getElementById("dark_img");
      const lightSpan = document.getElementById("light_span");
      const darkSpan = document.getElementById("dark_span");
      const hamberger = document.getElementById("hamberger1");
      const side_hamberger = document.querySelector("#sidenav_hamberger path");

      // Toggle theme class
      body.classList.toggle("light");

      // Toggle visibility of images & spans
      if (body.classList.contains("light")) {
        hamberger.style.fill = "black";
        if (side_hamberger) side_hamberger.style.fill = "black";
        lightImg.style.display = "none";
        darkImg.style.display = "inline";
        lightSpan.style.display = "none";
        darkSpan.style.display = "inline";
      } else {        
        hamberger.style.fill = "white";
        if (side_hamberger) side_hamberger.style.fill = "white";
        lightImg.style.display = "inline";
        darkImg.style.display = "none";
        lightSpan.style.display = "inline";
        darkSpan.style.display = "none";
      }
    }

    // Sidebar functionality
    function openSidebar() {
      document.getElementById("sidebar").classList.add("active");
    }

    function closeSidebar() {
      document.getElementById("sidebar").classList.remove("active");
    }

    // Close sidebar when clicking outside
    document.addEventListener("click", function(event) {
      const sidebar = document.getElementById("sidebar");
      const hamberger = document.getElementById("hamberger");
      
      if (sidebar.classList.contains("active") && 
          !sidebar.contains(event.target) && 
          !hamberger.contains(event.target)) {
        closeSidebar();
      }
    });

    // Task form functionality
    function toggleTaskForm() {
      const taskForm = document.getElementById("task_form");
      const taskText = document.getElementById("task_text");
      
      taskForm.classList.toggle("active");
      taskText.classList.toggle("active");
    }

    // Task management
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    function addTask(event) {
      event.preventDefault();
      
      const taskName = document.getElementById("taskName").value;
      const subject = document.getElementById("subject").value;
      const priority = document.getElementById("priority").value;
      const percentage = document.getElementById("percentage").value;
      
      const newTask = {
        id: Date.now(),
        name: taskName,
        subject: subject,
        priority: priority,
        percentage: percentage,
        completed: false
      };
      
      tasks.push(newTask);
      saveTasks();
      renderTasks();
      
      // Reset form
      document.getElementById("task_form").reset();
      toggleTaskForm();
    }

    function deleteTask(id) {
      tasks = tasks.filter(task => task.id !== id);
      saveTasks();
      renderTasks();
    }

    function toggleComplete(id) {
      tasks = tasks.map(task => {
        if (task.id === id) {
          task.completed = !task.completed;
          task.percentage = task.completed ? 100 : 0;
        }
        return task;
      });
      saveTasks();
      renderTasks();
    }

    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function renderTasks() {
      const taskList = document.getElementById("task_list");
      taskList.innerHTML = '';
      
      if (tasks.length === 0) {
        taskList.innerHTML = '<p>No tasks yet. Add your first task!</p>';
        return;
      }
      
      tasks.forEach(task => {
        const taskItem = document.createElement("div");
        taskItem.className = `task_item ${task.priority.toLowerCase()}`;
        
        taskItem.innerHTML = `
          <div class="task_info">
            <div class="task_name">${task.name}</div>
            <div class="task_subject">${task.subject}</div>
          </div>
          <div class="task_details">
            <span class="task_priority ${task.priority.toLowerCase()}">${task.priority}</span>
            <div class="task_progress">
              <div class="progress_bar">
                <div class="progress_fill" style="width: ${task.percentage}%"></div>
              </div>
              <span>${task.percentage}%</span>
            </div>
          </div>
          <div class="task_actions">
            <button class="complete_btn" onclick="toggleComplete(${task.id})">
              ${task.completed ? 'Undo' : 'Complete'}
            </button>
            <button class="delete_btn" onclick="deleteTask(${task.id})">Delete</button>
          </div>
        `;
        
        taskList.appendChild(taskItem);
      });
    }

    // Initialize theme based on user preference
    function initTheme() {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (!prefersDark) {
        toggleTheme();
      }
    }

    // Run initialization when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initTheme();
      renderTasks();
    });
  </script>
</body>
</html>
</html>